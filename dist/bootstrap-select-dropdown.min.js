!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=$},function(e,t,n){"use strict";n(2),n(3)},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=l(n(0)),s=l(n(4)),a=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var d=1,c=function(e){var t="selectDropdown",n="bs.selectDropdown",i="."+n,l=e.fn[t],c={maxListLength:4,hideSelect:!0,search:!0,observeDomMutations:!1,maxHeight:"300px",keyboard:!0,textNoneSelected:"None selected",textMultipleSelected:"Multiple selected",textNoResults:"No results",htmlClear:"Clear search",classBtnClear:"btn btn-outline-secondary",classBtnSearch:"btn btn-primary"},u={maxListLength:"number",hideSelect:"boolean",search:"boolean",observeDomMutations:"boolean",maxHeight:"string",keyboard:"boolean",textNoneSelected:"string",textMultipleSelected:"string",textNoResults:"string",htmlClear:"string",classBtnClear:"string",classBtnSearch:"string"},h={KEYUP:"keyup"+i,HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,FOCUSIN:"focusin"+i,RESIZE:"resize"+i,CLICK_DISMISS:"click.dismiss"+i,KEYDOWN_DISMISS:"keydown.dismiss"+i,MOUSEUP_DISMISS:"mouseup.dismiss"+i,MOUSEDOWN_DISMISS:"mousedown.dismiss"+i,CLICK_DATA_API:"click"+i+".data-api"},f="dropdown",p="dropdown-menu",v="dropdown-item",g="hover",m=function(){function i(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._config=this._getConfig(n),this._element=t,this._prefix="bsd"+this._config.SelectDropdownIndex+"-",this._multiselect=this._isMultiselect(t),this._indexes=[],this._lastSearch=null,this._resultsChanged=!1,this._hoverItem=e(),this.ids={},this.ids.dropdownContainerId=this._prefix+"container",this.ids.dropdownButtonId=this._prefix+"button",this.ids.controlSearchId=this._prefix+"search",this.ids.dropdownItemDeselect=this._prefix+"deselect",this.ids.dropdownItemShowSelected=this._prefix+"selected",this.els={},this.els.button=this.buildButton(),this.els.buttonClear=this.buildButtonClear(),this.els.controlSearch=this.buildcontrolSearch(),this.els.controlDeselect=this.buildDeselectAll(),this.els.controlSelected=this.buildShowSelected(),this.els.dropdown=this.buildDropdownMenu(),this.els.dropdownItemsContainer=this.buildDropdownItemsContainer(),this.els.dropdownItemNoResults=this.buildDropdownItemNoResults(),this.els.dropdownItems=this.buildDropdownItems(),this.els.dropdownOptions=this.els.dropdownItems.filter(function(t,n){return o.isOption(e(n))}),this._config.search&&(this._haystack=[],this._fuseOptions={keys:["text"],id:"index"},this.els.dropdownOptions.each(function(t,n){o._haystack[t]={index:e(n).data("index"),text:e(n).text()}})),this._addEventListeners(),this.init()}return r(i,[{key:"hoverSet",value:function(e){var t=this;if(t.els.dropdownOptions.removeClass(g),"undefined"===(void 0===e?"undefined":o(e)))var n=t.els.dropdownOptions.first();else n=t.dropdownItemByIndex(e);t._hoverItem=n,n.addClass(g)}},{key:"hoverUp",value:function(){var e=this._hoverItem;if("undefined"!==(void 0===e?"undefined":o(e))&&e.length)var t=e.prevAll("a:visible").first();"undefined"!==(void 0===t?"undefined":o(t))&&t.length&&(e.removeClass(g),t.addClass(g),this._hoverItem=t)}},{key:"hoverDown",value:function(){var e=this._hoverItem;if("undefined"!==(void 0===e?"undefined":o(e))&&e.length)var t=e.nextAll("a:visible").first();"undefined"!==(void 0===t?"undefined":o(t))&&t.length&&(e.removeClass(g),t.addClass(g),this._hoverItem=t)}},{key:"hoverRemove",value:function(){this.els.dropdownItems.removeClass(g).show()}},{key:"toggle",value:function(t){var n=this,o=e(n._element),r=t.data("option"),i=o.find("option").eq(r);i.is(":selected")?(i.prop("selected",!1),t.removeClass("active")):(n._multiselect||n.els.dropdownOptions.removeClass("active"),i.prop("selected",!0),t.addClass("active")),n.setButtonText(),n.refreshInitialControls()}},{key:"deselectAll",value:function(){var t=this;e(t._element);t.els.dropdownOptions.each(function(){t.deselect(e(this))}),t.refresh()}},{key:"deselect",value:function(t){var n=e(this._element),o=t.data("option");n.find("option").eq(o).is(":selected")&&this.toggle(t)}},{key:"_getConfig",value:function(e){return e=Object.assign({},c,e),s.default.typeCheckConfig(t,e,u),e}},{key:"_addEventListeners",value:function(){var e=this;this._config.search&&this.els.controlSearch.on(h.KEYUP,function(t){return e._keyup(t)})}},{key:"_keyup",value:function(t){if(this._config.keyboard){if(13==t.which)return this.toggle(this.els.dropdown.find(".hover").first()),void(this._multiselect||this.els.button.dropdown("toggle"));if(38==t.which)return this.dropdownActive()||(this.els.button.dropdown("toggle"),this.els.controlSearch.focus()),void this.hoverUp();if(40==t.which)return this.dropdownActive()||(this.els.button.dropdown("toggle"),this.els.controlSearch.focus()),void this.hoverDown()}this._search(e(this.els.controlSearch).val())}},{key:"init",value:function(){var t=this,n=e(t._element);t.els.controlSearch.bind({paste:function(){e(this).trigger("keydown")},cut:function(){e(this).trigger("keydown")}}),t.setButtonText();var o=t.buildDropdown();if(o.append(t.els.dropdown),t.els.dropdownItemsContainer.append(t.els.dropdownItems),t._multiselect&&t.els.dropdown.append(t.els.controlDeselect).append(t.els.controlSelected),t.els.dropdown.append(t.els.dropdownItemsContainer),n.after(o),t._config.hideSelect&&n.hide(),t.els.controlSearch.on("focus",function(){t.hoverSet()}),t.els.controlSearch.on("blur",function(){t.hoverRemove()}),t.els.dropdownOptions.on("click",function(n){n.preventDefault(),t._multiselect&&o.one("hide.bs.dropdown",function(e){e.preventDefault()}),t.toggle(e(this))}),t.els.controlDeselect.on("click",function(n){n.preventDefault(),o.one("hide.bs.dropdown",function(e){e.preventDefault()}),e(this).hasClass("disabled")||t.deselectAll()}),t.els.controlSelected.on("click",function(n){n.preventDefault(),o.one("hide.bs.dropdown",function(e){e.preventDefault()}),e(this).hasClass("disabled")||t.sortSelected()}),t.els.buttonClear.on("click",function(){t.els.controlSearch.val(""),t.dropdownActive()&&o.one("hide.bs.dropdown",function(e){e.preventDefault()}),t.refresh()}),t.els.dropdownItemNoResults.on("click",function(e){e.preventDefault(),o.one("hide.bs.dropdown",function(e){e.preventDefault()})}),t._config.search&&t.els.controlSearch.on("focusin",function(){"false"==t.els.button.attr("aria-expanded")&&(t.els.button.dropdown("toggle"),setTimeout(function(){t.els.controlSearch.focus()},1))}),t.refreshInitialControls(),t._config.observeDomMutations){new MutationObserver(function(e){var n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)"childList"==i.value.type&&t.refresh()}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}}).observe(n[0],{childList:!0,subtree:!0})}}},{key:"_isMultiselect",value:function(t){var n=e(t).attr("multiple");return"undefined"!==(void 0===n?"undefined":o(n))&&!1!==n}},{key:"_search",value:function(t){var n=null;if(""==e.trim(t))return this.refresh(),void(null!==this._lastSearch&&(this._resultsChanged=!0,this._lastSearch=null));n=new a.default(this._haystack,this._fuseOptions).search(t),this._resultsChanged=!0,n?(null!==typeof this._lastSearch&&this.arraysEqual(n,this._lastSearch)&&(this._resultsChanged=!1),this._resultsChanged&&(this.hoverSet(n[0]),this.hide(n),this.reorder(n),this.resetScroll()),this._lastSearch=n):this.refresh()}},{key:"buildDropdown",value:function(){var t=this,n=e("<div>",{id:t.ids.dropdownContainerId,class:f});return t._config.search?(n.append(e("<div>",{class:"input-group"}).append(t.els.controlSearch).append(e("<div>",{class:"input-group-append"}).append(t.els.buttonClear)).append(e("<div>",{class:"input-group-append"}).append(t.els.button))),t.els.dropdown.addClass("dropdown-menu-right")):n.append(t.els.button),n}},{key:"buildButton",value:function(){var t=this;return e("<button>",{class:t._config.classBtnSearch+" dropdown-toggle",type:"button",id:t.ids.dropdownButtonId,"data-toggle":"dropdown","data-target":"#"+t.ids.dropdownContainerId,"aria-haspopup":"true","aria-expanded":"false"})}},{key:"buildButtonClear",value:function(){return e("<button>",{type:"button",class:this._config.classBtnClear}).html(this._config.htmlClear)}},{key:"buildcontrolSearch",value:function(){return e("<input>",{type:"text",class:"form-control",placeholder:"Search","aria-label":"Search","aria-describedby":this.ids.controlSearchId})}},{key:"buildDropdownMenu",value:function(){var t=this,n=e("<div>",{class:p,"aria-labelledby":t.ids.dropdownButtonId});return t._config.maxHeight&&n.css({height:"auto","max-height":t._config.maxHeight,"overflow-x":"hidden"}),n}},{key:"buildDropdownItemsContainer",value:function(){return e("<div>")}},{key:"buildDropdownItems",value:function(){var t=this,n=e(t._element),o=0,r=0,i=e(),s=n.find("optgroup");return s.length?s.each(function(){i=i.add(t.buildDropdownHeader(e(this).attr("label")).data("index",o)),o=t.incrementIndex(o),e(this).find("option").each(function(){i=i.add(t.buildDropdownItem(e(this)).data("index",o).data("option",r)),o=t.incrementIndex(o),r++})}):n.find("option").each(function(n,s){i=i.add(t.buildDropdownItem(e(this)).data("index",o).data("option",r)),o=t.incrementIndex(o),r++}),t._config.search&&(i=i.add(t.els.dropdownItemNoResults)),i}},{key:"incrementIndex",value:function(e){return this._indexes.push(e.toString()),++e}},{key:"buildDropdownHeader",value:function(t){return e("<h6>",{class:"dropdown-header",text:t})}},{key:"buildDropdownItem",value:function(t){var n=e("<a>",{href:"#",class:v,text:t.text()});return t.is(":selected")&&n.addClass("active"),n}},{key:"buildDropdownItemNoResults",value:function(){return e("<span>",{class:v+" text-muted no-results",text:this._config.textNoResults}).hide()}},{key:"buildDeselectAll",value:function(){return e("<a>",{href:"#",id:this.ids.dropdownItemDeselect,class:v,text:"Deselect all"})}},{key:"buildShowSelected",value:function(){return e("<a>",{href:"#",id:this.ids.dropdownItemShowSelected,class:v,text:"Show selected"})}},{key:"dropdownActive",value:function(){return!!this.els.dropdown.hasClass("show")}},{key:"isOption",value:function(e){var t=e.data("option");return"undefined"!==(void 0===t?"undefined":o(t))&&!1!==t}},{key:"setButtonText",value:function(){var t=this,n=e(t._element),o=t.els.button,r=n.val();if(r.length<1)o.text(t._config.textNoneSelected);else if(r.length<=t._config.maxListLength){var i=n.find("option:selected").map(function(t,n){return e(n).text()}).get();o.text(i.join(", "))}else o.text(t._config.textMultipleSelected)}},{key:"refresh",value:function(){var e=this;e.hoverRemove(),e.els.dropdownItemNoResults.hide(),e.sortReset(),e.showInitialControls()}},{key:"hide",value:function(t){var n=this,o=e(n._indexes).not(t).get();e.each(o,function(e,t){n.dropdownItemByIndex(t).hide()}),n.els.button.dropdown("update")}},{key:"dropdownItemByIndex",value:function(t){return this.els.dropdownItems.filter(function(){return e(this).data("index")==t})}},{key:"hideInitialControls",value:function(){this.els.controlDeselect.hide(),this.els.controlSelected.hide()}},{key:"showInitialControls",value:function(e){var t=this;(e="undefined"!==(void 0===e?"undefined":o(e))&&e)&&(t.els.controlSelected.prependTo(t.els.dropdown),t.els.controlDeselect.prependTo(t.els.dropdown)),t.els.controlSelected.show(),t.els.controlDeselect.show()}},{key:"refreshInitialControls",value:function(){var t=this,n=e(t._element);n.val()&&0!=n.val().length?(t.els.controlDeselect.removeClass("disabled"),t.els.controlSelected.removeClass("disabled")):(t.els.controlDeselect.addClass("disabled"),t.els.controlSelected.addClass("disabled"))}},{key:"sortReset",value:function(){var e,t=this;for(e=t.els.dropdownItems.length;e>=0;e--)t.dropdownItemByIndex(e).prependTo(t.els.dropdownItemsContainer)}},{key:"reorder",value:function(t){var n=this;if(n.els.dropdownItemNoResults.hide(),"undefined"!==(void 0===t?"undefined":o(t))&&0!=t.length){var r=t.slice(0);r=r.reverse(),e.each(r,function(e,t){n.dropdownItemByIndex(t).prependTo(n.els.dropdownItemsContainer)}),n.hideInitialControls()}else n.els.dropdownItemNoResults.show()}},{key:"sortSelected",value:function(){var t=this;e(t._element);t.els.dropdownOptions.removeClass(g),e(t.els.dropdown.find(".active").get().reverse()).each(function(){e(this).prependTo(t.els.dropdownItemsContainer)}),t.showInitialControls(!0),t.resetScroll()}},{key:"resetScroll",value:function(){this.els.dropdown.animate({scrollTop:0},50)}},{key:"classListToSelector",value:function(e){var t=e;e.length&&(t="."+e.split(/\s+/).join("."));return t}},{key:"arraysEqual",value:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}}],[{key:"_jQueryInterface",value:function(t,r){return this.each(function(){var s=e(this).data(n),a=Object.assign({},i.Default,e(this).data(),"object"===(void 0===t?"undefined":o(t))&&t,{SelectDropdownIndex:d});if(d++,s||(s=new i(this,a),e(this).data(n,s)),"string"==typeof t){if(void 0===s[t])throw new TypeError('No method named "'+t+'"');s[t](r)}else a.show&&s.show(r)})}},{key:"VERSION",get:function(){return"0.7.0"}},{key:"Default",get:function(){return c}}]),i}();return e.fn[t]=m._jQueryInterface,e.fn[t].Constructor=m,e.fn[t].noConflict=function(){return e.fn[t]=l,m._jQueryInterface},m}(i.default,a.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);const r=(e=>{let t=!1;function n(t){let n=!1;return e(this).one(o.TRANSITION_END,()=>{n=!0}),setTimeout(()=>{n||o.triggerTransitionEnd(this)},t),this}const o={TRANSITION_END:"bsTransitionEnd",getUID(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},getSelectorFromElement(t){let n=t.getAttribute("data-target");n&&"#"!==n||(n=t.getAttribute("href")||""),"#"===n.charAt(0)&&(n=function(t){return t="function"==typeof e.escapeSelector?e.escapeSelector(t).substr(1):t.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1")}(n));try{return e(document).find(n).length>0?n:null}catch(e){return null}},reflow:e=>e.offsetHeight,triggerTransitionEnd(n){e(n).trigger(t.end)},supportsTransitionEnd:()=>Boolean(t),isElement:e=>(e[0]||e).nodeType,typeCheckConfig(e,t,n){for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const s=n[i],a=t[i],l=a&&o.isElement(a)?"element":(r=a,{}.toString.call(r).match(/\s([a-zA-Z]+)/)[1].toLowerCase());if(!new RegExp(s).test(l))throw new Error(`${e.toUpperCase()}: `+`Option "${i}" provided type "${l}" `+`but expected type "${s}".`)}var r}};return t=("undefined"==typeof window||!window.QUnit)&&{end:"transitionend"},e.fn.emulateTransitionEnd=n,o.supportsTransitionEnd()&&(e.event.special[o.TRANSITION_END]={bindType:t.end,delegateType:t.end,handle(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}),o})(n.n(o).a);t.default=r},function(e,t,n){var o;o=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=n(5),i=n(7),s=n(4),a=function(){function e(t,n){var o=n.location,r=void 0===o?0:o,i=n.distance,a=void 0===i?100:i,l=n.threshold,d=void 0===l?.6:l,c=n.maxPatternLength,u=void 0===c?32:c,h=n.isCaseSensitive,f=void 0!==h&&h,p=n.tokenSeparator,v=void 0===p?/ +/g:p,g=n.findAllMatches,m=void 0!==g&&g,y=n.minMatchCharLength,w=void 0===y?1:y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:r,distance:a,threshold:d,maxPatternLength:u,isCaseSensitive:f,tokenSeparator:v,findAllMatches:m,minMatchCharLength:w},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=s(this.pattern))}return o(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,o=t.tokenSeparator;if(this.pattern.length>n)return r(e,this.pattern,o);var s=this.options,a=s.location,l=s.distance,d=s.threshold,c=s.findAllMatches,u=s.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:a,distance:l,threshold:d,findAllMatches:c,minMatchCharLength:u})}}]),e}();e.exports=a},function(e,t,n){"use strict";var o=n(0);e.exports=function(e,t){return function e(t,n,r){if(n){var i=n.indexOf("."),s=n,a=null;-1!==i&&(s=n.slice(0,i),a=n.slice(i+1));var l=t[s];if(null!==l&&void 0!==l)if(a||"string"!=typeof l&&"number"!=typeof l)if(o(l))for(var d=0,c=l.length;d<c;d+=1)e(l[d],a,r);else a&&e(l,a,r);else r.push(l.toString())}else r.push(t);return r}(e,t,[])}},function(e,t,n){"use strict";e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],o=-1,r=-1,i=0,s=e.length;i<s;i+=1){var a=e[i];a&&-1===o?o=i:a||-1===o||((r=i-1)-o+1>=t&&n.push([o,r]),o=-1)}return e[i-1]&&i-o>=t&&n.push([o,i-1]),n}},function(e,t,n){"use strict";e.exports=function(e){for(var t={},n=e.length,o=0;o<n;o+=1)t[e.charAt(o)]=0;for(var r=0;r<n;r+=1)t[e.charAt(r)]|=1<<n-r-1;return t}},function(e,t,n){"use strict";var o=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,r=new RegExp(t.replace(o,"\\$&").replace(n,"|")),i=e.match(r),s=!!i,a=[];if(s)for(var l=0,d=i.length;l<d;l+=1){var c=i[l];a.push([e.indexOf(c),c.length-1])}return{score:s?.5:1,isMatch:s,matchedIndices:a}}},function(e,t,n){"use strict";e.exports=function(e,t){var n=t.errors,o=void 0===n?0:n,r=t.currentLocation,i=void 0===r?0:r,s=t.expectedLocation,a=void 0===s?0:s,l=t.distance,d=void 0===l?100:l,c=o/e.length,u=Math.abs(a-i);return d?c+u/d:u?1:c}},function(e,t,n){"use strict";var o=n(6),r=n(3);e.exports=function(e,t,n,i){for(var s=i.location,a=void 0===s?0:s,l=i.distance,d=void 0===l?100:l,c=i.threshold,u=void 0===c?.6:c,h=i.findAllMatches,f=void 0!==h&&h,p=i.minMatchCharLength,v=void 0===p?1:p,g=a,m=e.length,y=u,w=e.indexOf(t,g),b=t.length,S=[],_=0;_<m;_+=1)S[_]=0;if(-1!==w){var x=o(t,{errors:0,currentLocation:w,expectedLocation:g,distance:d});if(y=Math.min(x,y),-1!==(w=e.lastIndexOf(t,g+b))){var k=o(t,{errors:0,currentLocation:w,expectedLocation:g,distance:d});y=Math.min(k,y)}}w=-1;for(var I=[],C=1,D=b+m,M=1<<b-1,O=0;O<b;O+=1){for(var L=0,A=D;L<A;){o(t,{errors:O,currentLocation:g+A,expectedLocation:g,distance:d})<=y?L=A:D=A,A=Math.floor((D-L)/2+L)}D=A;var T=Math.max(1,g-A+1),E=f?m:Math.min(g+A,m)+b,N=Array(E+2);N[E+1]=(1<<O)-1;for(var B=E;B>=T;B-=1){var R=B-1,j=n[e.charAt(R)];if(j&&(S[R]=1),N[B]=(N[B+1]<<1|1)&j,0!==O&&(N[B]|=(I[B+1]|I[B])<<1|1|I[B+1]),N[B]&M&&(C=o(t,{errors:O,currentLocation:R,expectedLocation:g,distance:d}))<=y){if(y=C,(w=R)<=g)break;T=Math.max(1,2*g-w)}}if(o(t,{errors:O+1,currentLocation:g,expectedLocation:g,distance:d})>y)break;I=N}return{isMatch:w>=0,score:0===C?.001:C,matchedIndices:r(S,v)}}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=n(1),i=n(2),s=n(0),a=function(){function e(t,n){var o=n.location,r=void 0===o?0:o,s=n.distance,a=void 0===s?100:s,l=n.threshold,d=void 0===l?.6:l,c=n.maxPatternLength,u=void 0===c?32:c,h=n.caseSensitive,f=void 0!==h&&h,p=n.tokenSeparator,v=void 0===p?/ +/g:p,g=n.findAllMatches,m=void 0!==g&&g,y=n.minMatchCharLength,w=void 0===y?1:y,b=n.id,S=void 0===b?null:b,_=n.keys,x=void 0===_?[]:_,k=n.shouldSort,I=void 0===k||k,C=n.getFn,D=void 0===C?i:C,M=n.sortFn,O=void 0===M?function(e,t){return e.score-t.score}:M,L=n.tokenize,A=void 0!==L&&L,T=n.matchAllTokens,E=void 0!==T&&T,N=n.includeMatches,B=void 0!==N&&N,R=n.includeScore,j=void 0!==R&&R,P=n.verbose,z=void 0!==P&&P;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:r,distance:a,threshold:d,maxPatternLength:u,isCaseSensitive:f,tokenSeparator:v,findAllMatches:m,minMatchCharLength:w,id:S,keys:x,includeMatches:B,includeScore:j,shouldSort:I,getFn:D,sortFn:O,verbose:z,tokenize:A,matchAllTokens:E},this.setCollection(t)}return o(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),n=t.tokenSearchers,o=t.fullSearcher,r=this._search(n,o),i=r.weights,s=r.results;return this._computeScore(i,s),this.options.shouldSort&&this._sort(s),this._format(s)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),o=0,i=n.length;o<i;o+=1)t.push(new r(n[o],this.options));return{tokenSearchers:t,fullSearcher:new r(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=this.list,o={},r=[];if("string"==typeof n[0]){for(var i=0,s=n.length;i<s;i+=1)this._analyze({key:"",value:n[i],record:i,index:i},{resultMap:o,results:r,tokenSearchers:e,fullSearcher:t});return{weights:null,results:r}}for(var a={},l=0,d=n.length;l<d;l+=1)for(var c=n[l],u=0,h=this.options.keys.length;u<h;u+=1){var f=this.options.keys[u];if("string"!=typeof f){if(a[f.name]={weight:1-f.weight||1},f.weight<=0||f.weight>1)throw new Error("Key weight has to be > 0 and <= 1");f=f.name}else a[f]={weight:1};this._analyze({key:f,value:this.options.getFn(c,f),record:c,index:l},{resultMap:o,results:r,tokenSearchers:e,fullSearcher:t})}return{weights:a,results:r}}},{key:"_analyze",value:function(e,t){var n=e.key,o=e.arrayIndex,r=void 0===o?-1:o,i=e.value,a=e.record,l=e.index,d=t.tokenSearchers,c=void 0===d?[]:d,u=t.fullSearcher,h=void 0===u?[]:u,f=t.resultMap,p=void 0===f?{}:f,v=t.results,g=void 0===v?[]:v;if(void 0!==i&&null!==i){var m=!1,y=-1,w=0;if("string"==typeof i){this._log("\nKey: "+(""===n?"-":n));var b=h.search(i);if(this._log('Full text: "'+i+'", score: '+b.score),this.options.tokenize){for(var S=i.split(this.options.tokenSeparator),_=[],x=0;x<c.length;x+=1){var k=c[x];this._log('\nPattern: "'+k.pattern+'"');for(var I=!1,C=0;C<S.length;C+=1){var D=S[C],M=k.search(D),O={};M.isMatch?(O[D]=M.score,m=!0,I=!0,_.push(M.score)):(O[D]=1,this.options.matchAllTokens||_.push(1)),this._log('Token: "'+D+'", score: '+O[D])}I&&(w+=1)}y=_[0];for(var L=_.length,A=1;A<L;A+=1)y+=_[A];y/=L,this._log("Token score average:",y)}var T=b.score;y>-1&&(T=(T+y)/2),this._log("Score average:",T);var E=!this.options.tokenize||!this.options.matchAllTokens||w>=c.length;if(this._log("\nCheck Matches: "+E),(m||b.isMatch)&&E){var N=p[l];N?N.output.push({key:n,arrayIndex:r,value:i,score:T,matchedIndices:b.matchedIndices}):(p[l]={item:a,output:[{key:n,arrayIndex:r,value:i,score:T,matchedIndices:b.matchedIndices}]},g.push(p[l]))}}else if(s(i))for(var B=0,R=i.length;B<R;B+=1)this._analyze({key:n,arrayIndex:B,value:i[B],record:a,index:l},{resultMap:p,results:g,tokenSearchers:c,fullSearcher:h})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var n=0,o=t.length;n<o;n+=1){for(var r=t[n].output,i=r.length,s=0,a=1,l=0;l<i;l+=1){var d=e?e[r[l].key].weight:1,c=(1===d?r[l].score:r[l].score||.001)*d;1!==d?a=Math.min(a,c):(r[l].nScore=c,s+=c)}t[n].score=1===a?s/i:a,this._log(t[n])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this._log("\n\nOutput:\n\n",JSON.stringify(e));var n=[];this.options.includeMatches&&n.push(function(e,t){var n=e.output;t.matches=[];for(var o=0,r=n.length;o<r;o+=1){var i=n[o];if(0!==i.matchedIndices.length){var s={indices:i.matchedIndices,value:i.value};i.key&&(s.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(s.arrayIndex=i.arrayIndex),t.matches.push(s)}}}),this.options.includeScore&&n.push(function(e,t){t.score=e.score});for(var o=0,r=e.length;o<r;o+=1){var i=e[o];if(this.options.id&&(i.item=this.options.getFn(i.item,this.options.id)[0]),n.length){for(var s={item:i.item},a=0,l=n.length;a<l;a+=1)n[a](i,s);t.push(s)}else t.push(i.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),e}();e.exports=a}])},e.exports=o()}]);